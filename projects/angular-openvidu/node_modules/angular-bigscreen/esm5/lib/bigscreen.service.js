/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Injectable } from '@angular/core';
import { DocumentRef } from './document-ref';
import * as i0 from "@angular/core";
import * as i1 from "./document-ref";
/**
 * @record
 */
function FullscreenControls() { }
if (false) {
    /** @type {?} */
    FullscreenControls.prototype.requestFullscreen;
    /** @type {?} */
    FullscreenControls.prototype.exitFullscreen;
    /** @type {?} */
    FullscreenControls.prototype.fullscreenElement;
    /** @type {?} */
    FullscreenControls.prototype.fullscreenEnabled;
    /** @type {?} */
    FullscreenControls.prototype.fullscreenchange;
    /** @type {?} */
    FullscreenControls.prototype.fullscreenerror;
}
var BigScreenService = /** @class */ (function () {
    function BigScreenService(documentRef) {
        this.documentRef = documentRef;
        this.fnMap = [
            // Object keys
            [
                'requestFullscreen',
                'exitFullscreen',
                'fullscreenElement',
                'fullscreenEnabled',
                'fullscreenchange',
                'fullscreenerror'
            ],
            // New WebKit
            [
                'webkitRequestFullscreen',
                'webkitExitFullscreen',
                'webkitFullscreenElement',
                'webkitFullscreenEnabled',
                'webkitfullscreenchange',
                'webkitfullscreenerror'
            ],
            // Old WebKit (Safari 5.1)
            [
                'webkitRequestFullScreen',
                'webkitCancelFullScreen',
                'webkitCurrentFullScreenElement',
                'webkitCancelFullScreen',
                'webkitfullscreenchange',
                'webkitfullscreenerror'
            ],
            // Mozilla
            [
                'mozRequestFullScreen',
                'mozCancelFullScreen',
                'mozFullScreenElement',
                'mozFullScreenEnabled',
                'mozfullscreenchange',
                'mozfullscreenerror'
            ],
            // MS
            [
                'msRequestFullscreen',
                'msExitFullscreen',
                'msFullscreenElement',
                'msFullscreenEnabled',
                'MSFullscreenChange',
                'MSFullscreenError'
            ]
        ];
        this.keyboardAllowed = typeof Element !== 'undefined' && 'ALLOW_KEYBOARD_INPUT' in Element;
        /** @type {?} */
        var ret = {};
        /** @type {?} */
        var val;
        for (var i = 0; i < this.fnMap.length; i++) {
            val = this.fnMap[i];
            if (val && val[1] in this.documentRef.nativeDocument) {
                for (i = 0; i < val.length; i++) {
                    // Map everything to the first list of keys
                    ret[this.fnMap[0][i].toString()] = val[i];
                }
                this.fn = ret;
            }
        }
    }
    /**
     * @param {?} elem
     * @return {?}
     */
    BigScreenService.prototype.request = /**
     * @param {?} elem
     * @return {?}
     */
    function (elem) {
        /** @type {?} */
        var request = this.fn.requestFullscreen;
        elem = elem || this.documentRef.nativeDocument.documentElement;
        // Work around Safari 5.1 bug: reports support for
        // keyboard in fullscreen even though it doesn't.
        // Browser sniffing, since the alternative with
        // setTimeout is even worse.
        if (/5\.1[.\d]* Safari/.test(navigator.userAgent)) {
            elem[request]();
        }
        else {
            elem[request](this.keyboardAllowed ? ((/** @type {?} */ (Element))).ALLOW_KEYBOARD_INPUT : {});
        }
    };
    /**
     * @return {?}
     */
    BigScreenService.prototype.exit = /**
     * @return {?}
     */
    function () {
        this.documentRef.nativeDocument[this.fn.exitFullscreen]();
    };
    /**
     * @param {?} elem
     * @return {?}
     */
    BigScreenService.prototype.toggle = /**
     * @param {?} elem
     * @return {?}
     */
    function (elem) {
        if (this.isFullscreen()) {
            this.exit();
        }
        else {
            this.request(elem);
        }
    };
    /**
     * @param {?} callback
     * @return {?}
     */
    BigScreenService.prototype.onChange = /**
     * @param {?} callback
     * @return {?}
     */
    function (callback) {
        this.documentRef.nativeDocument.addEventListener(this.fn.fullscreenchange, callback, false);
    };
    /**
     * @param {?} callback
     * @return {?}
     */
    BigScreenService.prototype.onError = /**
     * @param {?} callback
     * @return {?}
     */
    function (callback) {
        this.documentRef.nativeDocument.addEventListener(this.fn.fullscreenerror, callback, false);
    };
    /**
     * @return {?}
     */
    BigScreenService.prototype.isFullscreen = /**
     * @return {?}
     */
    function () {
        return Boolean(this.documentRef.nativeDocument[this.fn.fullscreenElement]);
    };
    /**
     * @return {?}
     */
    BigScreenService.prototype.isEnabled = /**
     * @return {?}
     */
    function () {
        // Coerce to boolean in case of old WebKit
        return Boolean(this.documentRef.nativeDocument[this.fn.fullscreenEnabled]);
    };
    /**
     * @return {?}
     */
    BigScreenService.prototype.getElement = /**
     * @return {?}
     */
    function () {
        return this.documentRef.nativeDocument[this.fn.fullscreenElement];
    };
    BigScreenService.decorators = [
        { type: Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];
    /** @nocollapse */
    BigScreenService.ctorParameters = function () { return [
        { type: DocumentRef }
    ]; };
    /** @nocollapse */ BigScreenService.ngInjectableDef = i0.defineInjectable({ factory: function BigScreenService_Factory() { return new BigScreenService(i0.inject(i1.DocumentRef)); }, token: BigScreenService, providedIn: "root" });
    return BigScreenService;
}());
export { BigScreenService };
if (false) {
    /**
     * @type {?}
     * @private
     */
    BigScreenService.prototype.fnMap;
    /**
     * @type {?}
     * @private
     */
    BigScreenService.prototype.fn;
    /**
     * @type {?}
     * @private
     */
    BigScreenService.prototype.keyboardAllowed;
    /**
     * @type {?}
     * @private
     */
    BigScreenService.prototype.documentRef;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmlnc2NyZWVuLnNlcnZpY2UuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9hbmd1bGFyLWJpZ3NjcmVlbi8iLCJzb3VyY2VzIjpbImxpYi9iaWdzY3JlZW4uc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUUzQyxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7Ozs7OztBQUU3QyxpQ0FjQzs7O0lBWkEsK0NBQXVCOztJQUV2Qiw0Q0FBb0I7O0lBRXBCLCtDQUF1Qjs7SUFFdkIsK0NBQTBCOztJQUUxQiw4Q0FBeUI7O0lBRXpCLDZDQUF3Qjs7QUFJekI7SUEwREMsMEJBQW9CLFdBQXdCO1FBQXhCLGdCQUFXLEdBQVgsV0FBVyxDQUFhO1FBckRwQyxVQUFLLEdBQWU7WUFDM0IsY0FBYztZQUNkO2dCQUNDLG1CQUFtQjtnQkFDbkIsZ0JBQWdCO2dCQUNoQixtQkFBbUI7Z0JBQ25CLG1CQUFtQjtnQkFDbkIsa0JBQWtCO2dCQUNsQixpQkFBaUI7YUFDakI7WUFDRCxhQUFhO1lBQ2I7Z0JBQ0MseUJBQXlCO2dCQUN6QixzQkFBc0I7Z0JBQ3RCLHlCQUF5QjtnQkFDekIseUJBQXlCO2dCQUN6Qix3QkFBd0I7Z0JBQ3hCLHVCQUF1QjthQUV2QjtZQUNELDBCQUEwQjtZQUMxQjtnQkFDQyx5QkFBeUI7Z0JBQ3pCLHdCQUF3QjtnQkFDeEIsZ0NBQWdDO2dCQUNoQyx3QkFBd0I7Z0JBQ3hCLHdCQUF3QjtnQkFDeEIsdUJBQXVCO2FBRXZCO1lBQ0QsVUFBVTtZQUNWO2dCQUNDLHNCQUFzQjtnQkFDdEIscUJBQXFCO2dCQUNyQixzQkFBc0I7Z0JBQ3RCLHNCQUFzQjtnQkFDdEIscUJBQXFCO2dCQUNyQixvQkFBb0I7YUFDcEI7WUFDRCxLQUFLO1lBQ0w7Z0JBQ0MscUJBQXFCO2dCQUNyQixrQkFBa0I7Z0JBQ2xCLHFCQUFxQjtnQkFDckIscUJBQXFCO2dCQUNyQixv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MUMsT0FBTyxPQUFPLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLENBQUM7SUFDNUUsQ0FBQzs7OztJQUVNLHFDQUFVOzs7SUFBakI7UUFDQyxPQUFPLElBQUksQ0FBQyxXQUFXLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsaUJBQWlCLENBQUMsQ0FBQztJQUNuRSxDQUFDOztnQkExSEQsVUFBVSxTQUFDO29CQUNYLFVBQVUsRUFBRSxNQUFNO2lCQUNsQjs7OztnQkFwQlEsV0FBVzs7OzJCQUZwQjtDQWdKQyxBQTVIRCxJQTRIQztTQXpIWSxnQkFBZ0I7Ozs7OztJQUU1QixpQ0FnREU7Ozs7O0lBRUYsOEJBQStCOzs7OztJQUMvQiwyQ0FBaUM7Ozs7O0lBRXJCLHVDQUFnQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuaW1wb3J0IHsgRG9jdW1lbnRSZWYgfSBmcm9tICcuL2RvY3VtZW50LXJlZic7XG5cbmludGVyZmFjZSBGdWxsc2NyZWVuQ29udHJvbHMge1xuXG5cdHJlcXVlc3RGdWxsc2NyZWVuOiBhbnk7XG5cblx0ZXhpdEZ1bGxzY3JlZW46IGFueTtcblxuXHRmdWxsc2NyZWVuRWxlbWVudDogYW55O1xuXG5cdGZ1bGxzY3JlZW5FbmFibGVkOiBzdHJpbmc7XG5cblx0ZnVsbHNjcmVlbmNoYW5nZTogc3RyaW5nO1xuXG5cdGZ1bGxzY3JlZW5lcnJvcjogc3RyaW5nO1xuXG59XG5cbkBJbmplY3RhYmxlKHtcblx0cHJvdmlkZWRJbjogJ3Jvb3QnXG59KVxuZXhwb3J0IGNsYXNzIEJpZ1NjcmVlblNlcnZpY2Uge1xuXG5cdHByaXZhdGUgZm5NYXA6IHN0cmluZ1tdW10gPSBbXG5cdFx0Ly8gT2JqZWN0IGtleXNcblx0XHRbXG5cdFx0XHQncmVxdWVzdEZ1bGxzY3JlZW4nLFxuXHRcdFx0J2V4aXRGdWxsc2NyZWVuJyxcblx0XHRcdCdmdWxsc2NyZWVuRWxlbWVudCcsXG5cdFx0XHQnZnVsbHNjcmVlbkVuYWJsZWQnLFxuXHRcdFx0J2Z1bGxzY3JlZW5jaGFuZ2UnLFxuXHRcdFx0J2Z1bGxzY3JlZW5lcnJvcidcblx0XHRdLFxuXHRcdC8vIE5ldyBXZWJLaXRcblx0XHRbXG5cdFx0XHQnd2Via2l0UmVxdWVzdEZ1bGxzY3JlZW4nLFxuXHRcdFx0J3dlYmtpdEV4aXRGdWxsc2NyZWVuJyxcblx0XHRcdCd3ZWJraXRGdWxsc2NyZWVuRWxlbWVudCcsXG5cdFx0XHQnd2Via2l0RnVsbHNjcmVlbkVuYWJsZWQnLFxuXHRcdFx0J3dlYmtpdGZ1bGxzY3JlZW5jaGFuZ2UnLFxuXHRcdFx0J3dlYmtpdGZ1bGxzY3JlZW5lcnJvcidcblxuXHRcdF0sXG5cdFx0Ly8gT2xkIFdlYktpdCAoU2FmYXJpIDUuMSlcblx0XHRbXG5cdFx0XHQnd2Via2l0UmVxdWVzdEZ1bGxTY3JlZW4nLFxuXHRcdFx0J3dlYmtpdENhbmNlbEZ1bGxTY3JlZW4nLFxuXHRcdFx0J3dlYmtpdEN1cnJlbnRGdWxsU2NyZWVuRWxlbWVudCcsXG5cdFx0XHQnd2Via2l0Q2FuY2VsRnVsbFNjcmVlbicsXG5cdFx0XHQnd2Via2l0ZnVsbHNjcmVlbmNoYW5nZScsXG5cdFx0XHQnd2Via2l0ZnVsbHNjcmVlbmVycm9yJ1xuXG5cdFx0XSxcblx0XHQvLyBNb3ppbGxhXG5cdFx0W1xuXHRcdFx0J21velJlcXVlc3RGdWxsU2NyZWVuJyxcblx0XHRcdCdtb3pDYW5jZWxGdWxsU2NyZWVuJyxcblx0XHRcdCdtb3pGdWxsU2NyZWVuRWxlbWVudCcsXG5cdFx0XHQnbW96RnVsbFNjcmVlbkVuYWJsZWQnLFxuXHRcdFx0J21vemZ1bGxzY3JlZW5jaGFuZ2UnLFxuXHRcdFx0J21vemZ1bGxzY3JlZW5lcnJvcidcblx0XHRdLFxuXHRcdC8vIE1TXG5cdFx0W1xuXHRcdFx0J21zUmVxdWVzdEZ1bGxzY3JlZW4nLFxuXHRcdFx0J21zRXhpdEZ1bGxzY3JlZW4nLFxuXHRcdFx0J21zRnVsbHNjcmVlbkVsZW1lbnQnLFxuXHRcdFx0J21zRnVsbHNjcmVlbkVuYWJsZWQnLFxuXHRcdFx0J01TRnVsbHNjcmVlbkNoYW5nZScsXG5cdFx0XHQnTVNGdWxsc2NyZWVuRXJyb3InXG5cdFx0XVxuXHRdO1xuXG5cdHByaXZhdGUgZm46IEZ1bGxzY3JlZW5Db250cm9scztcblx0cHJpdmF0ZSBrZXlib2FyZEFsbG93ZWQ6IGJvb2xlYW47XG5cblx0Y29uc3RydWN0b3IocHJpdmF0ZSBkb2N1bWVudFJlZjogRG9jdW1lbnRSZWYpIHtcblx0XHR0aGlzLmtleWJvYXJkQWxsb3dlZCA9IHR5cGVvZiBFbGVtZW50ICE9PSAndW5kZWZpbmVkJyAmJiAnQUxMT1dfS0VZQk9BUkRfSU5QVVQnIGluIEVsZW1lbnQ7XG5cdFx0Y29uc3QgcmV0OiBhbnkgPSB7fTtcblx0XHRsZXQgdmFsO1xuXG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmZuTWFwLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YWwgPSB0aGlzLmZuTWFwW2ldO1xuXHRcdFx0aWYgKHZhbCAmJiB2YWxbMV0gaW4gdGhpcy5kb2N1bWVudFJlZi5uYXRpdmVEb2N1bWVudCkge1xuXHRcdFx0XHRmb3IgKGkgPSAwOyBpIDwgdmFsLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdFx0Ly8gTWFwIGV2ZXJ5dGhpbmcgdG8gdGhlIGZpcnN0IGxpc3Qgb2Yga2V5c1xuXHRcdFx0XHRcdHJldFt0aGlzLmZuTWFwWzBdW2ldLnRvU3RyaW5nKCldID0gdmFsW2ldO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHRoaXMuZm4gPSByZXQ7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cHVibGljIHJlcXVlc3QoZWxlbTogYW55KSB7XG5cdFx0Y29uc3QgcmVxdWVzdCA9IHRoaXMuZm4ucmVxdWVzdEZ1bGxzY3JlZW47XG5cblx0XHRlbGVtID0gZWxlbSB8fCB0aGlzLmRvY3VtZW50UmVmLm5hdGl2ZURvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcblxuXHRcdC8vIFdvcmsgYXJvdW5kIFNhZmFyaSA1LjEgYnVnOiByZXBvcnRzIHN1cHBvcnQgZm9yXG5cdFx0Ly8ga2V5Ym9hcmQgaW4gZnVsbHNjcmVlbiBldmVuIHRob3VnaCBpdCBkb2Vzbid0LlxuXHRcdC8vIEJyb3dzZXIgc25pZmZpbmcsIHNpbmNlIHRoZSBhbHRlcm5hdGl2ZSB3aXRoXG5cdFx0Ly8gc2V0VGltZW91dCBpcyBldmVuIHdvcnNlLlxuXHRcdGlmICgvNVxcLjFbLlxcZF0qIFNhZmFyaS8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSkge1xuXHRcdFx0ZWxlbVtyZXF1ZXN0XSgpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRlbGVtW3JlcXVlc3RdKHRoaXMua2V5Ym9hcmRBbGxvd2VkID8gKEVsZW1lbnQgYXMgYW55KS5BTExPV19LRVlCT0FSRF9JTlBVVCA6IHt9KTtcblx0XHR9XG5cdH1cblxuXHRwdWJsaWMgZXhpdCgpIHtcblx0XHR0aGlzLmRvY3VtZW50UmVmLm5hdGl2ZURvY3VtZW50W3RoaXMuZm4uZXhpdEZ1bGxzY3JlZW5dKCk7XG5cdH1cblxuXHRwdWJsaWMgdG9nZ2xlKGVsZW06IGFueSkge1xuXHRcdGlmICh0aGlzLmlzRnVsbHNjcmVlbigpKSB7XG5cdFx0XHR0aGlzLmV4aXQoKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy5yZXF1ZXN0KGVsZW0pO1xuXHRcdH1cblx0fVxuXG5cdHB1YmxpYyBvbkNoYW5nZShjYWxsYmFjazogYW55KSB7XG5cdFx0dGhpcy5kb2N1bWVudFJlZi5uYXRpdmVEb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKHRoaXMuZm4uZnVsbHNjcmVlbmNoYW5nZSwgY2FsbGJhY2ssIGZhbHNlKTtcblx0fVxuXG5cdHB1YmxpYyBvbkVycm9yKGNhbGxiYWNrOiBhbnkpIHtcblx0XHR0aGlzLmRvY3VtZW50UmVmLm5hdGl2ZURvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIodGhpcy5mbi5mdWxsc2NyZWVuZXJyb3IsIGNhbGxiYWNrLCBmYWxzZSk7XG5cdH1cblxuXHRwdWJsaWMgaXNGdWxsc2NyZWVuKCkge1xuXHRcdHJldHVybiBCb29sZWFuKHRoaXMuZG9jdW1lbnRSZWYubmF0aXZlRG9jdW1lbnRbdGhpcy5mbi5mdWxsc2NyZWVuRWxlbWVudF0pO1xuXHR9XG5cblx0cHVibGljIGlzRW5hYmxlZCgpIHtcblx0XHQvLyBDb2VyY2UgdG8gYm9vbGVhbiBpbiBjYXNlIG9mIG9sZCBXZWJLaXRcblx0XHRyZXR1cm4gQm9vbGVhbih0aGlzLmRvY3VtZW50UmVmLm5hdGl2ZURvY3VtZW50W3RoaXMuZm4uZnVsbHNjcmVlbkVuYWJsZWRdKTtcblx0fVxuXG5cdHB1YmxpYyBnZXRFbGVtZW50KCkge1xuXHRcdHJldHVybiB0aGlzLmRvY3VtZW50UmVmLm5hdGl2ZURvY3VtZW50W3RoaXMuZm4uZnVsbHNjcmVlbkVsZW1lbnRdO1xuXHR9XG5cbn1cbiJdfQ==