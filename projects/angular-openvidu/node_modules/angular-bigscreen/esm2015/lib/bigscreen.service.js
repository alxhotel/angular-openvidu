/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Injectable } from '@angular/core';
import { DocumentRef } from './document-ref';
import * as i0 from "@angular/core";
import * as i1 from "./document-ref";
/**
 * @record
 */
function FullscreenControls() { }
if (false) {
    /** @type {?} */
    FullscreenControls.prototype.requestFullscreen;
    /** @type {?} */
    FullscreenControls.prototype.exitFullscreen;
    /** @type {?} */
    FullscreenControls.prototype.fullscreenElement;
    /** @type {?} */
    FullscreenControls.prototype.fullscreenEnabled;
    /** @type {?} */
    FullscreenControls.prototype.fullscreenchange;
    /** @type {?} */
    FullscreenControls.prototype.fullscreenerror;
}
export class BigScreenService {
    /**
     * @param {?} documentRef
     */
    constructor(documentRef) {
        this.documentRef = documentRef;
        this.fnMap = [
            // Object keys
            [
                'requestFullscreen',
                'exitFullscreen',
                'fullscreenElement',
                'fullscreenEnabled',
                'fullscreenchange',
                'fullscreenerror'
            ],
            // New WebKit
            [
                'webkitRequestFullscreen',
                'webkitExitFullscreen',
                'webkitFullscreenElement',
                'webkitFullscreenEnabled',
                'webkitfullscreenchange',
                'webkitfullscreenerror'
            ],
            // Old WebKit (Safari 5.1)
            [
                'webkitRequestFullScreen',
                'webkitCancelFullScreen',
                'webkitCurrentFullScreenElement',
                'webkitCancelFullScreen',
                'webkitfullscreenchange',
                'webkitfullscreenerror'
            ],
            // Mozilla
            [
                'mozRequestFullScreen',
                'mozCancelFullScreen',
                'mozFullScreenElement',
                'mozFullScreenEnabled',
                'mozfullscreenchange',
                'mozfullscreenerror'
            ],
            // MS
            [
                'msRequestFullscreen',
                'msExitFullscreen',
                'msFullscreenElement',
                'msFullscreenEnabled',
                'MSFullscreenChange',
                'MSFullscreenError'
            ]
        ];
        this.keyboardAllowed = typeof Element !== 'undefined' && 'ALLOW_KEYBOARD_INPUT' in Element;
        /** @type {?} */
        const ret = {};
        /** @type {?} */
        let val;
        for (let i = 0; i < this.fnMap.length; i++) {
            val = this.fnMap[i];
            if (val && val[1] in this.documentRef.nativeDocument) {
                for (i = 0; i < val.length; i++) {
                    // Map everything to the first list of keys
                    ret[this.fnMap[0][i].toString()] = val[i];
                }
                this.fn = ret;
            }
        }
    }
    /**
     * @param {?} elem
     * @return {?}
     */
    request(elem) {
        /** @type {?} */
        const request = this.fn.requestFullscreen;
        elem = elem || this.documentRef.nativeDocument.documentElement;
        // Work around Safari 5.1 bug: reports support for
        // keyboard in fullscreen even though it doesn't.
        // Browser sniffing, since the alternative with
        // setTimeout is even worse.
        if (/5\.1[.\d]* Safari/.test(navigator.userAgent)) {
            elem[request]();
        }
        else {
            elem[request](this.keyboardAllowed ? ((/** @type {?} */ (Element))).ALLOW_KEYBOARD_INPUT : {});
        }
    }
    /**
     * @return {?}
     */
    exit() {
        this.documentRef.nativeDocument[this.fn.exitFullscreen]();
    }
    /**
     * @param {?} elem
     * @return {?}
     */
    toggle(elem) {
        if (this.isFullscreen()) {
            this.exit();
        }
        else {
            this.request(elem);
        }
    }
    /**
     * @param {?} callback
     * @return {?}
     */
    onChange(callback) {
        this.documentRef.nativeDocument.addEventListener(this.fn.fullscreenchange, callback, false);
    }
    /**
     * @param {?} callback
     * @return {?}
     */
    onError(callback) {
        this.documentRef.nativeDocument.addEventListener(this.fn.fullscreenerror, callback, false);
    }
    /**
     * @return {?}
     */
    isFullscreen() {
        return Boolean(this.documentRef.nativeDocument[this.fn.fullscreenElement]);
    }
    /**
     * @return {?}
     */
    isEnabled() {
        // Coerce to boolean in case of old WebKit
        return Boolean(this.documentRef.nativeDocument[this.fn.fullscreenEnabled]);
    }
    /**
     * @return {?}
     */
    getElement() {
        return this.documentRef.nativeDocument[this.fn.fullscreenElement];
    }
}
BigScreenService.decorators = [
    { type: Injectable, args: [{
                providedIn: 'root'
            },] }
];
/** @nocollapse */
BigScreenService.ctorParameters = () => [
    { type: DocumentRef }
];
/** @nocollapse */ BigScreenService.ngInjectableDef = i0.defineInjectable({ factory: function BigScreenService_Factory() { return new BigScreenService(i0.inject(i1.DocumentRef)); }, token: BigScreenService, providedIn: "root" });
if (false) {
    /**
     * @type {?}
     * @private
     */
    BigScreenService.prototype.fnMap;
    /**
     * @type {?}
     * @private
     */
    BigScreenService.prototype.fn;
    /**
     * @type {?}
     * @private
     */
    BigScreenService.prototype.keyboardAllowed;
    /**
     * @type {?}
     * @private
     */
    BigScreenService.prototype.documentRef;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmlnc2NyZWVuLnNlcnZpY2UuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9hbmd1bGFyLWJpZ3NjcmVlbi8iLCJzb3VyY2VzIjpbImxpYi9iaWdzY3JlZW4uc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUUzQyxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7Ozs7OztBQUU3QyxpQ0FjQzs7O0lBWkEsK0NBQXVCOztJQUV2Qiw0Q0FBb0I7O0lBRXBCLCtDQUF1Qjs7SUFFdkIsK0NBQTBCOztJQUUxQiw4Q0FBeUI7O0lBRXpCLDZDQUF3Qjs7QUFPekIsTUFBTSxPQUFPLGdCQUFnQjs7OztJQXVENUIsWUFBb0IsV0FBd0I7UUFBeEIsZ0JBQVcsR0FBWCxXQUFXLENBQWE7UUFyRHBDLFVBQUssR0FBZTtZQUMzQixjQUFjO1lBQ2Q7Z0JBQ0MsbUJBQW1CO2dCQUNuQixnQkFBZ0I7Z0JBQ2hCLG1CQUFtQjtnQkFDbkIsbUJBQW1CO2dCQUNuQixrQkFBa0I7Z0JBQ2xCLGlCQUFpQjthQUNqQjtZQUNELGFBQWE7WUFDYjtnQkFDQyx5QkFBeUI7Z0JBQ3pCLHNCQUFzQjtnQkFDdEIseUJBQXlCO2dCQUN6Qix5QkFBeUI7Z0JBQ3pCLHdCQUF3QjtnQkFDeEIsdUJBQXVCO2FBRXZCO1lBQ0QsMEJBQTBCO1lBQzFCO2dCQUNDLHlCQUF5QjtnQkFDekIsd0JBQXdCO2dCQUN4QixnQ0FBZ0M7Z0JBQ2hDLHdCQUF3QjtnQkFDeEIsd0JBQXdCO2dCQUN4Qix1QkFBdUI7YUFFdkI7WUFDRCxVQUFVO1lBQ1Y7Z0JBQ0Msc0JBQXNCO2dCQUN0QixxQkFBcUI7Z0JBQ3JCLHNCQUFzQjtnQkFDdEIsc0JBQXNCO2dCQUN0QixxQkFBcUI7Z0JBQ3JCLG9CQUFvQjthQUNwQjtZQUNELEtBQUs7WUFDTDtnQkFDQyxxQkFBcUI7Z0JBQ3JCLGtCQUFrQjtnQkFDbEIscUJBQXFCO2dC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LENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLENBQUM7SUFDNUUsQ0FBQzs7OztJQUVNLFVBQVU7UUFDaEIsT0FBTyxJQUFJLENBQUMsV0FBVyxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLGlCQUFpQixDQUFDLENBQUM7SUFDbkUsQ0FBQzs7O1lBMUhELFVBQVUsU0FBQztnQkFDWCxVQUFVLEVBQUUsTUFBTTthQUNsQjs7OztZQXBCUSxXQUFXOzs7Ozs7OztJQXVCbkIsaUNBZ0RFOzs7OztJQUVGLDhCQUErQjs7Ozs7SUFDL0IsMkNBQWlDOzs7OztJQUVyQix1Q0FBZ0MiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbmltcG9ydCB7IERvY3VtZW50UmVmIH0gZnJvbSAnLi9kb2N1bWVudC1yZWYnO1xuXG5pbnRlcmZhY2UgRnVsbHNjcmVlbkNvbnRyb2xzIHtcblxuXHRyZXF1ZXN0RnVsbHNjcmVlbjogYW55O1xuXG5cdGV4aXRGdWxsc2NyZWVuOiBhbnk7XG5cblx0ZnVsbHNjcmVlbkVsZW1lbnQ6IGFueTtcblxuXHRmdWxsc2NyZWVuRW5hYmxlZDogc3RyaW5nO1xuXG5cdGZ1bGxzY3JlZW5jaGFuZ2U6IHN0cmluZztcblxuXHRmdWxsc2NyZWVuZXJyb3I6IHN0cmluZztcblxufVxuXG5ASW5qZWN0YWJsZSh7XG5cdHByb3ZpZGVkSW46ICdyb290J1xufSlcbmV4cG9ydCBjbGFzcyBCaWdTY3JlZW5TZXJ2aWNlIHtcblxuXHRwcml2YXRlIGZuTWFwOiBzdHJpbmdbXVtdID0gW1xuXHRcdC8vIE9iamVjdCBrZXlzXG5cdFx0W1xuXHRcdFx0J3JlcXVlc3RGdWxsc2NyZWVuJyxcblx0XHRcdCdleGl0RnVsbHNjcmVlbicsXG5cdFx0XHQnZnVsbHNjcmVlbkVsZW1lbnQnLFxuXHRcdFx0J2Z1bGxzY3JlZW5FbmFibGVkJyxcblx0XHRcdCdmdWxsc2NyZWVuY2hhbmdlJyxcblx0XHRcdCdmdWxsc2NyZWVuZXJyb3InXG5cdFx0XSxcblx0XHQvLyBOZXcgV2ViS2l0XG5cdFx0W1xuXHRcdFx0J3dlYmtpdFJlcXVlc3RGdWxsc2NyZWVuJyxcblx0XHRcdCd3ZWJraXRFeGl0RnVsbHNjcmVlbicsXG5cdFx0XHQnd2Via2l0RnVsbHNjcmVlbkVsZW1lbnQnLFxuXHRcdFx0J3dlYmtpdEZ1bGxzY3JlZW5FbmFibGVkJyxcblx0XHRcdCd3ZWJraXRmdWxsc2NyZWVuY2hhbmdlJyxcblx0XHRcdCd3ZWJraXRmdWxsc2NyZWVuZXJyb3InXG5cblx0XHRdLFxuXHRcdC8vIE9sZCBXZWJLaXQgKFNhZmFyaSA1LjEpXG5cdFx0W1xuXHRcdFx0J3dlYmtpdFJlcXVlc3RGdWxsU2NyZWVuJyxcblx0XHRcdCd3ZWJraXRDYW5jZWxGdWxsU2NyZWVuJyxcblx0XHRcdCd3ZWJraXRDdXJyZW50RnVsbFNjcmVlbkVsZW1lbnQnLFxuXHRcdFx0J3dlYmtpdENhbmNlbEZ1bGxTY3JlZW4nLFxuXHRcdFx0J3dlYmtpdGZ1bGxzY3JlZW5jaGFuZ2UnLFxuXHRcdFx0J3dlYmtpdGZ1bGxzY3JlZW5lcnJvcidcblxuXHRcdF0sXG5cdFx0Ly8gTW96aWxsYVxuXHRcdFtcblx0XHRcdCdtb3pSZXF1ZXN0RnVsbFNjcmVlbicsXG5cdFx0XHQnbW96Q2FuY2VsRnVsbFNjcmVlbicsXG5cdFx0XHQnbW96RnVsbFNjcmVlbkVsZW1lbnQnLFxuXHRcdFx0J21vekZ1bGxTY3JlZW5FbmFibGVkJyxcblx0XHRcdCdtb3pmdWxsc2NyZWVuY2hhbmdlJyxcblx0XHRcdCdtb3pmdWxsc2NyZWVuZXJyb3InXG5cdFx0XSxcblx0XHQvLyBNU1xuXHRcdFtcblx0XHRcdCdtc1JlcXVlc3RGdWxsc2NyZWVuJyxcblx0XHRcdCdtc0V4aXRGdWxsc2NyZWVuJyxcblx0XHRcdCdtc0Z1bGxzY3JlZW5FbGVtZW50Jyxcblx0XHRcdCdtc0Z1bGxzY3JlZW5FbmFibGVkJyxcblx0XHRcdCdNU0Z1bGxzY3JlZW5DaGFuZ2UnLFxuXHRcdFx0J01TRnVsbHNjcmVlbkVycm9yJ1xuXHRcdF1cblx0XTtcblxuXHRwcml2YXRlIGZuOiBGdWxsc2NyZWVuQ29udHJvbHM7XG5cdHByaXZhdGUga2V5Ym9hcmRBbGxvd2VkOiBib29sZWFuO1xuXG5cdGNvbnN0cnVjdG9yKHByaXZhdGUgZG9jdW1lbnRSZWY6IERvY3VtZW50UmVmKSB7XG5cdFx0dGhpcy5rZXlib2FyZEFsbG93ZWQgPSB0eXBlb2YgRWxlbWVudCAhPT0gJ3VuZGVmaW5lZCcgJiYgJ0FMTE9XX0tFWUJPQVJEX0lOUFVUJyBpbiBFbGVtZW50O1xuXHRcdGNvbnN0IHJldDogYW55ID0ge307XG5cdFx0bGV0IHZhbDtcblxuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5mbk1hcC5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFsID0gdGhpcy5mbk1hcFtpXTtcblx0XHRcdGlmICh2YWwgJiYgdmFsWzFdIGluIHRoaXMuZG9jdW1lbnRSZWYubmF0aXZlRG9jdW1lbnQpIHtcblx0XHRcdFx0Zm9yIChpID0gMDsgaSA8IHZhbC5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRcdC8vIE1hcCBldmVyeXRoaW5nIHRvIHRoZSBmaXJzdCBsaXN0IG9mIGtleXNcblx0XHRcdFx0XHRyZXRbdGhpcy5mbk1hcFswXVtpXS50b1N0cmluZygpXSA9IHZhbFtpXTtcblx0XHRcdFx0fVxuXHRcdFx0XHR0aGlzLmZuID0gcmV0O1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHB1YmxpYyByZXF1ZXN0KGVsZW06IGFueSkge1xuXHRcdGNvbnN0IHJlcXVlc3QgPSB0aGlzLmZuLnJlcXVlc3RGdWxsc2NyZWVuO1xuXG5cdFx0ZWxlbSA9IGVsZW0gfHwgdGhpcy5kb2N1bWVudFJlZi5uYXRpdmVEb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG5cblx0XHQvLyBXb3JrIGFyb3VuZCBTYWZhcmkgNS4xIGJ1ZzogcmVwb3J0cyBzdXBwb3J0IGZvclxuXHRcdC8vIGtleWJvYXJkIGluIGZ1bGxzY3JlZW4gZXZlbiB0aG91Z2ggaXQgZG9lc24ndC5cblx0XHQvLyBCcm93c2VyIHNuaWZmaW5nLCBzaW5jZSB0aGUgYWx0ZXJuYXRpdmUgd2l0aFxuXHRcdC8vIHNldFRpbWVvdXQgaXMgZXZlbiB3b3JzZS5cblx0XHRpZiAoLzVcXC4xWy5cXGRdKiBTYWZhcmkvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpIHtcblx0XHRcdGVsZW1bcmVxdWVzdF0oKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0ZWxlbVtyZXF1ZXN0XSh0aGlzLmtleWJvYXJkQWxsb3dlZCA/IChFbGVtZW50IGFzIGFueSkuQUxMT1dfS0VZQk9BUkRfSU5QVVQgOiB7fSk7XG5cdFx0fVxuXHR9XG5cblx0cHVibGljIGV4aXQoKSB7XG5cdFx0dGhpcy5kb2N1bWVudFJlZi5uYXRpdmVEb2N1bWVudFt0aGlzLmZuLmV4aXRGdWxsc2NyZWVuXSgpO1xuXHR9XG5cblx0cHVibGljIHRvZ2dsZShlbGVtOiBhbnkpIHtcblx0XHRpZiAodGhpcy5pc0Z1bGxzY3JlZW4oKSkge1xuXHRcdFx0dGhpcy5leGl0KCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMucmVxdWVzdChlbGVtKTtcblx0XHR9XG5cdH1cblxuXHRwdWJsaWMgb25DaGFuZ2UoY2FsbGJhY2s6IGFueSkge1xuXHRcdHRoaXMuZG9jdW1lbnRSZWYubmF0aXZlRG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcih0aGlzLmZuLmZ1bGxzY3JlZW5jaGFuZ2UsIGNhbGxiYWNrLCBmYWxzZSk7XG5cdH1cblxuXHRwdWJsaWMgb25FcnJvcihjYWxsYmFjazogYW55KSB7XG5cdFx0dGhpcy5kb2N1bWVudFJlZi5uYXRpdmVEb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKHRoaXMuZm4uZnVsbHNjcmVlbmVycm9yLCBjYWxsYmFjaywgZmFsc2UpO1xuXHR9XG5cblx0cHVibGljIGlzRnVsbHNjcmVlbigpIHtcblx0XHRyZXR1cm4gQm9vbGVhbih0aGlzLmRvY3VtZW50UmVmLm5hdGl2ZURvY3VtZW50W3RoaXMuZm4uZnVsbHNjcmVlbkVsZW1lbnRdKTtcblx0fVxuXG5cdHB1YmxpYyBpc0VuYWJsZWQoKSB7XG5cdFx0Ly8gQ29lcmNlIHRvIGJvb2xlYW4gaW4gY2FzZSBvZiBvbGQgV2ViS2l0XG5cdFx0cmV0dXJuIEJvb2xlYW4odGhpcy5kb2N1bWVudFJlZi5uYXRpdmVEb2N1bWVudFt0aGlzLmZuLmZ1bGxzY3JlZW5FbmFibGVkXSk7XG5cdH1cblxuXHRwdWJsaWMgZ2V0RWxlbWVudCgpIHtcblx0XHRyZXR1cm4gdGhpcy5kb2N1bWVudFJlZi5uYXRpdmVEb2N1bWVudFt0aGlzLmZuLmZ1bGxzY3JlZW5FbGVtZW50XTtcblx0fVxuXG59XG4iXX0=